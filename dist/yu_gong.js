!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("htmlparser2"),require("@babel/parser"),require("@babel/traverse"),require("@babel/types"),require("@babel/generator")):"function"==typeof define&&define.amd?define(["exports","htmlparser2","@babel/parser","@babel/traverse","@babel/types","@babel/generator"],t):t((e=e||self).YG={},e.htmlparser2,e.parser$2,e.traverse,e.types,e.generator$2)}(this,(function(e,t,r,a,n,i){"use strict";t=t&&t.hasOwnProperty("default")?t.default:t,r=r&&r.hasOwnProperty("default")?r.default:r,a=a&&a.hasOwnProperty("default")?a.default:a,n=n&&n.hasOwnProperty("default")?n.default:n,i=i&&i.hasOwnProperty("default")?i.default:i;var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function l(e,t){return e(t={exports:{}},t.exports),t.exports}var c=l((function(e,r){Object.defineProperty(r,"__esModule",{value:!0}),r.default=function(e){return new Promise((r,a)=>{const n=new t.DomHandler((e,t)=>{e&&a(e),r(t)}),i=new t.Parser(n,{xmlMode:!0,lowerCaseTags:!1,recognizeSelfClosing:!0});i.write(e),i.end()})}}));s(c);var u=l((function(e,t){function r(e){return e?e.match(/{{(.*?)}}/g):[]}function a(e){switch(e.name){case"view":e.name="div";break;case"text":e.name="span";break;case"block":e.name="template";break;case"image":e.name="img";break;case"mf-page":e.name="div"}}function n(e){Object.keys(e.attribs).forEach(t=>{const a=e.attribs[t];"class"===t?function(e,t){const a=r(e);if(a&&a.length){const r=a.map(e=>e.replace(/{{(.*?)}}/,"$1"));t.attribs[":class"]=`[${r}]`;const n=a.reduce((e,t)=>e.replace(t,""),e);t.attribs.class=n.trim()}}(a,e):"style"===t?function(e,t){const a=e.split(";"),n=[],i={};let o="";a.forEach(e=>{const t=r(e);if(t&&t.length){let[t,r]=e.split(":"),a="";t=t.replace(/-(\w)/g,(e,t)=>t.toUpperCase()).trim();const n=r.split("{{");let o=[];n.forEach(e=>{o=o.concat(e.split("}}"))}),o.forEach((e,t)=>{e&&(a.length&&(a+=t>0?"+":""),a+=t%2?e:JSON.stringify(e.trim()))});const s=a.replace(/([\d]+)rpx/g,(e,t)=>`${.5*t.replace(/(^:)|(:$)/g,"")}px`);i[t]=s}else{const t=e.trim().replace(/([\d]+)rpx/g,(e,t)=>`${.5*t.replace(/(^:)|(:$)/g,"")}px`);n.push(t)}}),t.attribs.style=n.join(";"),Object.keys(i).length&&(o="{ ",Object.keys(i).forEach(e=>{const t=i[e];o+=e,o+=": ",o+=t.replace(/"/g,"'"),o+=";"}),o+=" }",t.attribs[":style"]=o)}(a,e):t.match(/^bind/)?function(e,t,r){let a="";a=-1!==t.indexOf(":")?t.split(":")[1]:t.substr(4),"tap"===a&&(a="click"),r.attribs[`@${a}`]=`${e}($event)`,delete r.attribs[t]}(a,t,e):t.match(/^catch/)?function(e,t,r){let a="";a=-1!==t.indexOf(":")?t.split(":")[1]:t.substr(5),"tap"===a&&(a="click"),r.attribs[`@${a}.stop`]=e,delete r.attribs[t]}(a,t,e):t.match(/^wx:/)?function(e,t,r){switch(t.split(":")[1]){case"if":r.attribs["v-if"]=e.replace(/{{(.*?)}}/,"$1").trim(),delete r.attribs[t];break;case"else":r.attribs["v-else"]="",delete r.attribs[t];break;case"elif":r.attribs["v-else-if"]=e.replace(/{{(.*?)}}/,"$1").trim(),delete r.attribs[t];break;case"key":r.attribs[":key"]=e.replace(/{{(.*?)}}/,"$1").trim(),delete r.attribs[t];break;case"for":const a=r.attribs["wx:for-item"],n=r.attribs["wx:for-index"],i=e.replace(/{{(.*?)}}/,"$1").trim();r.attribs["v-for"]=`(${a||"item"}, ${n||"index"}) in ${i}`,delete r.attribs["wx:for-item"],delete r.attribs["wx:for-index"],delete r.attribs[t]}}(a,t,e):"mfConfig"===t?delete e.attribs[t]:function(e,t,a){r(e)&&r(e).length&&(a.attribs[`:${t}`]=e.replace(/{{(.*?)}}/,"$1").trim(),delete a.attribs[t])}(a,t,e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=async function e(t,r){for(let r=0;r<t.length;r++){const i=t[r];switch(i.type){case"tag":a(i),n(i)}i.children&&e(i.children)}return t}}));s(u);var d=l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r={area:1,base:1,basefont:1,br:1,col:1,frame:1,hr:1,img:1,input:1,isindex:1,link:1,meta:1,param:1,embed:1,"?xml":1},a=/&/g,n=/</g,i=/>/g,o=/"/g,s=/=/g,l={disableAttribEscape:!1};function c(e,t,u){if(Array.isArray(e))return e.map((function(e){return c(e,t,u)})).join("");var d=e;if(u&&(e=u(e,t)),void 0!==e&&void 0!==e.type)switch(e.type){case"text":return e.data;case"directive":return"<"+e.data+">";case"comment":return"\x3c!--"+e.data+"--\x3e";case"style":case"script":case"tag":var f="<"+e.name;return e.attribs&&Object.keys(e.attribs).length>0&&(f+=" "+Object.keys(e.attribs).map((function(t){return t+'="'+(r=e.attribs[t],!0===l.disableAttribEscape?r.toString():null==r?"":r.toString&&"function"==typeof r.toString?r.toString().replace(a,"&amp;").replace(n,"&lt;").replace(i,"&gt;").replace(o,"&#34;").replace(s,"&#61;"):"")+'"';var r})).join(" ")),e.children?(d.render||(d=t),f+=">"+c(e.children,d,u)+(r[e.name]?"":"</"+e.name+">")):r[e.name]?f+=">":f+="></"+e.name+">",f;case"cdata":return"<!CDATA["+e.data+"]]>"}return e}t.default=c,c.configure=function(e){if(void 0!==e)for(const t in l)void 0!==e[t]&&(l[t]=e[t])}}));s(d);var f=l((function(e,t){var r=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(c),n=r(u),i=r(d);t.default=async function(e,t={}){const r=await a.default(e),o=await n.default(r,t);return i.default.configure({disableAttribEscape:!0}),i.default(o)}}));s(f);var p=l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){return e.replace(/([\d]+)rpx/g,(e,t)=>`${.5*t.replace(/(^:)|(:$)/g,"")}px`)}}));s(p);var b=l((function(e,t){var r=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(p);t.default=function(e,t={type:"page"}){return a.default(e,t)}}));s(b);var v=l((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return r.parse(e,{sourceType:"module"})}}));s(v);var m=l((function(e,t){var r=o&&o.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n);function i(e,t){const{node:r}=e;e.get("value.properties").forEach(e=>{!function(e,t){const{node:r}=e;if(a.isObjectExpression(r.value)){const n=e.get("value.properties"),i=n.filter(e=>a.isNodesEquivalent(e.node.key,a.identifier("type")))[0].node.value;let o=a.objectProperty(r.key,a.nullLiteral());n.forEach(e=>{const n=e.node,s=n.key.name,l=t.findIndex(e=>a.isNodesEquivalent(e.node.key,a.identifier("watch")));switch(s){case"value":a.isNodesEquivalent(i,a.identifier("Object"))?e.replaceWith(a.objectProperty(a.identifier("default"),a.arrowFunctionExpression([],n.value))):a.isNodesEquivalent(i,a.identifier("Array"))?e.replaceWith(a.objectProperty(a.identifier("default"),a.arrowFunctionExpression([],n.value))):e.replaceWith(a.objectProperty(a.identifier("default"),n.value));break;case"observer":if(o=a.isNodesEquivalent(i,a.identifier("Object"))||a.isNodesEquivalent(i,a.identifier("Array"))?a.objectProperty(r.key,a.objectExpression([a.objectMethod("method",a.identifier("handler"),n.value.params,n.value.body),a.objectProperty(a.identifier("deep"),a.booleanLiteral(!0))])):a.objectProperty(r.key,a.arrowFunctionExpression(n.value.params,n.value.body)),-1===l)t[t.length-1].insertAfter(a.objectProperty(a.identifier("watch"),a.objectExpression([o])));else{const e=t[l].get("value.properties");e.length?e[e.length-1].insertAfter(o):t[l].replaceWith(a.objectProperty(a.identifier("watch"),a.objectExpression([o])))}e.remove()}})}}(e,t)}),e.replaceWith(a.objectProperty(a.identifier("props"),r.value))}function s(e){const{node:t}=e;e.replaceWith(a.objectProperty(a.identifier("data"),a.arrowFunctionExpression([],t.value)))}function l(e){const{node:t}=e,r=t.key.name,n={ready:"mounted",attached:"beforeMount",detached:"destroyed",behaviors:"mixins",onLoad:"created",onReady:"mounted",onUnload:"destroyed"};if(a.isObjectMethod(t))e.replaceWith(a.objectMethod("method",a.identifier(n[r]),t.params,t.body));else if(a.isObjectProperty(t)){const{value:i}=t;a.isFunctionExpression(i)||a.isArrowFunctionExpression(i)?e.replaceWith(a.objectMethod("method",a.identifier(n[r]),i.params,i.body)):e.replaceWith(a.objectProperty(a.identifier(n[r]),i))}}function c(e,t){const{node:r}=e,n=t.get("arguments.0.properties"),i=n.findIndex(e=>e.node&&a.isNodesEquivalent(e.node.key,a.identifier("methods")));if(a.isObjectMethod(r)||a.isArrowFunctionExpression(r.value)||a.isFunctionExpression(r.value)){if(-1===i)n[n.length-1].insertAfter(a.objectProperty(a.identifier("methods"),a.objectExpression([r])));else{const e=n[i].get("value.properties");e.length?e[e.length-1].insertAfter(r):n[i].replaceWith(a.objectProperty(a.identifier("methods"),a.objectExpression([r])))}e.remove()}}t.default=(e,t={})=>({visitor:{CallExpression(e){const{node:r}=e,{callee:n}=r,o=t.rootName||("page"===t.type?"Page":"Component");if("page"===t.type){if(n.name===o){const t=r.arguments[0];e.get("arguments.0.properties").forEach(t=>{const{name:r}=t.node.key;switch(r){case"data":s(t);break;case"onLoad":case"onReady":case"onUnload":l(t);break;default:c(t,e)}}),e.parentPath.replaceWith(a.exportDefaultDeclaration(t))}}else if("component"===t.type&&n.name===o){const t=r.arguments[0],n=e.get("arguments.0.properties");n.forEach(t=>{const{name:r}=t.node.key;switch(r){case"properties":i(t,n);break;case"data":s(t);break;case"attached":case"detached":case"behaviors":case"ready":l(t);break;default:c(t,e)}}),e.parentPath.replaceWith(a.exportDefaultDeclaration(t))}}}})}));s(m);var y=l((function(e,t){var r=o&&o.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const a=r(n);t.default=(e,t={})=>({visitor:{CallExpression(e){const{node:t}=e,r=t.callee;if(a.isThisExpression(r.object)&&"setData"===r.property.name){if(2===t.arguments.length){const r=t.arguments[1];e.insertAfter(r.body.body)}t.arguments[0].properties.reverse().forEach(t=>{e.insertAfter(a.assignmentExpression("=",a.memberExpression(a.thisExpression(),t.key),t.value))}),e.remove()}},ThisExpression(e){const t=e.parentPath.node;a.isMemberExpression(t)&&"data"===t.property.name&&e.parentPath.replaceWith(a.thisExpression())}}})}));s(y);var h=l((function(e,t){var r=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const n=r(a),i=r(m),s=r(y),l=[i.default,s.default];t.default=(e,t)=>l.reduce((e,r)=>(n.default(e,r(null,t).visitor),e),e)}));s(h);var g=l((function(e,t){var r=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(i);t.default=function(e){return a.default(e).code}}));s(g);var x=l((function(e,t){var r=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(v),n=r(h),i=r(g);t.default=function(e,t={type:"page"}){const r=a.default(e),o=n.default(r,t);return i.default(o)}}));s(x);var _=l((function(e,t){var r=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const a=r(f);t.wxmlConverter=a.default;const n=r(b);t.wxssConverter=n.default;const i=r(x);t.jsConverter=i.default,t.default=function(e,t){}})),j=s(_),w=_.wxmlConverter,P=_.wxssConverter,E=_.jsConverter;e.default=j,e.jsConverter=E,e.wxmlConverter=w,e.wxssConverter=P,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=yu_gong.js.map
